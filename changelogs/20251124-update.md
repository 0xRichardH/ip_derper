# Tailscale Update

**Date**: 2025-11-24
**Tailscale Version**: v1.91.0-pre
**Previous Commit**: 3a41c0c585f4b008c07a02ae91ed43cdbb62c721
**New Commit**: a20cdb5c938204d45502d4c52fafc8ad0b0afed9

## Changes
- tstest/integration/testcontrol: de-flake TestUserMetricsRouteGauges (a20cdb5c9)
- portlist,tstest: skip tests on kernels with /proc/net/tcp regression (16587746e)
- util/eventbus: use unbounded event queues for DeliveredEvents in subscribers (1ccece0f7)
- feature/relayserver: don't publish from within a subscribe fn goroutine (9245c7131)
- wgengine/userspace: run link change subscribers in eventqueue (#18024) (e7f5ca1d5)
- util/eventbus: add tests for a subscriber publishing events (3780f25d5)
- util/eventbus: add tests for a subscriber trying to acquire the same mutex as a publisher (016ccae2d)
- tka: don't panic if no clock set in tka.Mem (ce95bc77f)
- cmd/tailscaled,ipn: show a health warning when state store fails to open (#17883) (c679aaba3)
- go.mod: bump golang.org/x/crypto (#18011) (de8ed203e)
- ipn/ipnlocal: add validations when setting serve config (#17950) (ac74d2819)
- cmd/k8s-operator: add multi replica support for recorders (#17864) (42a526201)
- net/netns: remove spammy logs for interface binding caps (682172ca2)
- net/batching: fix import formatting (7d1981361)
- cmd/k8s-operator: use stable image for k8s-nameserver (#17985) (86a849860)
- cmd/tailscale/cli: allow remote target as service destination (#17607) (a0d059d74)
- licenses: update license notices (12c598de2)
- ipn/ipnlocal: remove the always-true CanSupportNetworkLock() (976bf24f5)
- util/eventbus: simplify some reflect in Bus.pump (6ac4356bc)
- cmd/tailscale/cli: remove Latin abbreviations from CLI help text (336df56f8)
- ipn/ipnlocal: reduce profileManager boilerplate in network-lock tests (aeda3e818)
- cmd/k8s-operator: fix type comparison in apiserver proxy template (#17981) (62d64c05e)
- ipn/ipnlocal, tka: compact TKA state after every sync (e1dd9222d)
- cmd/k8s-operator: default to stable image (#17848) (38ccdbe35)
- feature/featuretags: add CacheNetMap feature tag for upcoming work (408336a08)
- tailcfg: add some omitzero, adjust some omitempty to omitzero (5b0c57f49)
- cmd/netlogfmt: support resolving IP addresses to synonymous labels (#17955) (3b865d7c3)
- types/key,wgengine/magicsock,control/controlclient,ipn: add debug disco key rotation (c09c95ef6)
- appc: add ippool type (da508c504)
- tka: marshal AUMHash totext even if Tailnet Lock is omitted (d0daa5a39)
- tka: mark young AUMs as active even if the chain is long (04a9d25a5)
- types/netmap,*: remove some redundant fields from NetMap (bd29b189f)
- .github/workflows: make go_generate check detect new files (2a6cbb70d)
- feature/buildfeatures: re-run go generate (4e2f2d108)
- cmd/vet/jsontags: fix a typo in an error message (af7c26aa0)
- tka: move RemoveAll() to CompactableChonk (85373ef82)
- all: rename variables with lowercase-l/uppercase-I (c2e474e72)
- ipn/localapi: log calls to localapi (#17880) (9048ea25d)
- cmd/tailscale/cli: warn if a simple up would change prefs (#17877) (a2e9dfacd)
- wgengine/netlog: strip dot suffix from node name (#17954) (4860c460f)
- ssh/tailssh: fix incubator tests on macOS arm64 (41662f512)
- feature/tpm: disable dictionary attack protection on sealing key (#17952) (26f9b5024)
- ipn{,/local},cmd/tailscale: add "sync" flag and pref to disable control map poll (f1cddc6ec)
- tka: fix typo in comment (165a24744)
- ipn/ipnlocal: use an in-memory TKA store if FS is unavailable (1723cb83e)
- go.mod: bump golang.org/x/crypto (#17907) (d01081683)
- various: add more missing apostrophes in comments (200383dce)
- ipn: fix typo in comment (1e95bfa18)
- control/controlclient: remove some public API, move to Options & test-only (a5b2f1856)
- cmd/tailscale/cli: stabilise the output of `tailscale lock log --json` (139c395d7)
- syncs: add Mutex/RWMutex alias/wrappers for future mutex debugging (99b06eac4)
